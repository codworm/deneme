
; /* Start:"a:4:{s:4:"full";s:88:"/local/components/sb/gdpr.manager.bitrix24/templates/.default/base.min.js?16468286743186";s:6:"source";s:69:"/local/components/sb/gdpr.manager.bitrix24/templates/.default/base.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
!function(){function t(){this.manager=null,this.attributes={script:"data-bx-cookie-policy-template",initialized:"data-bx-cookie-policy-initialized",section:"data-bx-cookie-policy-section",sectionType:"data-bx-cookie-policy-section-type"},this.events={cookieManagerInitialized:"BX.SB.Util.Gdpr.Cookie.Manager:onInitialized"},BX.namespace("SB.Util.Gdpr.Cookie.Manager").isInitialized?this.run():document.addEventListener(this.events.cookieManagerInitialized,this.run.bind(this))}function e(t){if(BX.type.isNotEmptyObject(t)&&(this.isInitialized=!1,this.base=t.base||{},BX.type.isNotEmptyObject(this.base)&&(this.manager=this.base.manager||{},BX.type.isNotEmptyObject(this.manager)))){if(this.attributes={shown:"shown",close:"data-bx-cookie-policy-section-close"},this.settings={node:null,name:null,base:null,disableCookieStorage:!1,autoLoad:!0,eventClasses:{loadClass:""}},this.settings=BX.mergeEx({},this.settings,t),!this.settings.disableCookieStorage){if(!BX.type.isNotEmptyString(this.settings.name))return;this.settings.name=this.settings.name.toString()}BX.type.isElementNode(this.settings.node)&&this.init()}}t.prototype={run:function(){let t=BX.namespace("SB.Util.Gdpr.Cookie.Manager");if(!BX.type.isNotEmptyObject(t))return;this.manager=t;let i=document.querySelectorAll("["+this.attributes.section+"]:not(["+this.attributes.initialized+"])");for(let t=0;t<i.length;t++){let s=i[t];if(s){if(s.hasAttribute(this.attributes.initialized))continue;if(s.setAttribute(this.attributes.initialized,"true"),!s.hasAttribute(this.attributes.sectionType))continue;switch(s.getAttribute(this.attributes.sectionType)){case"popup":new e({node:s,name:"cookie_policy_site_redirect",base:this});break;case"slidebar":new e({node:s,name:"cookie_policy_slidebar",base:this});break;case"popupsettings":new e({node:s,name:"cookie_policy_popupsettings",base:this,disableCookieStorage:!0,autoLoad:!1,eventClasses:{loadClass:"js-show-gdpr-settings"}})}s.removeAttribute("style")}}}},e.prototype={show:function(){let t={attrs:{}};t.attrs[this.attributes.shown.toString()]="true",BX.adjust(this.settings.node,t)},hide:function(){this.settings.disableCookieStorage||BX.localStorage.set(this.settings.name,"Y",this.manager.isExpiresAllowed()?2592e3:0);let t={attrs:{}};t.attrs[this.attributes.shown.toString()]="false",BX.adjust(this.settings.node,t)},bind:function(){let t=this.settings.node.querySelectorAll("["+this.attributes.close+"]");for(let e in t)if(t.hasOwnProperty(e)){if(!BX.type.isElementNode(t[e]))continue;BX.bind(t[e],"click",BX.proxy(this.hide,this))}if(BX.type.isNotEmptyString(this.settings.eventClasses.loadClass)){let t=document.querySelectorAll("."+this.settings.eventClasses.loadClass),e=this;for(let i=0;i<t.length;i++)BX.bind(t[i],"click",(function(t){(t=t||document.event).preventDefault(),e.show()}))}},init:function(){if(!this.isInitialized&&BX.localStorage){if(!this.settings.disableCookieStorage){let t=BX.localStorage.get(this.settings.name);if(BX.type.isNotEmptyString(t))return}this.bind(),this.settings.autoLoad&&this.show(),this.isInitialized=!0}}},void 0!==window.frameCacheVars?BX.addCustomEvent("onFrameDataReceived",(function(){new t})):BX.ready((function(){new t}))}();
/* End */
;; /* /local/components/sb/gdpr.manager.bitrix24/templates/.default/base.min.js?16468286743186*/
